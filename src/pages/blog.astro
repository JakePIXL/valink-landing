---
import MainLayout from '../layouts/mainLayout.astro';
const allPosts = await Astro.glob('../pages/posts/*.md');
---

<MainLayout title="Blog" current_page="blog">
    <div class="container mx-auto flex flex-col p-4 gap-4">
        <h1 class="border-l-4 border-purple-400 pl-2 text-2xl font-semibold">Blog Posts</h1>
        <ul class="flex flex-col lg:grid grid-cols-2">
            {allPosts.map((post) => (
                <li class="card w-full mb-4 p-4 shadow-lg">
                    <a href={post.url} class="no-underline">
                        <h2 class="card-title text-xl font-bold mb-2">        
                            {post.frontmatter.title}
                        </h2>
                        <p class="opacity-40 text-sm">
                            Published on {new Date(post.frontmatter.pubDate).toLocaleDateString()} by {post.frontmatter.author}
                        </p>
                        <div class="divider"></div>
                        <p>{post.frontmatter.description}</p>
                        <div class="card-actions justify-end">
                            <a href={post.url} class="btn btn-primary">Read More</a>
                        </div>
                    </a>
                </li>
            ))}
        </ul>
    </div>
</MainLayout>
